<p-dialog 
    [header]="dialogTitle" 
    [(visible)]="visible" 
    [modal]="true" 
    [style]="{width: '500px'}"
    [closable]="true"
    [draggable]="false"
    (onHide)="onDialogHide()">
    
    <form [formGroup]="assignmentForm" (ngSubmit)="onSubmit()">
        <div class="info-section" *ngIf="selectedMember || selectedTrainer">
            <p *ngIf="selectedMember">
            <strong>{{ 'MEMBERS.MEMBER' | translate }}:</strong> 
            {{ selectedMember.firstName }} {{ selectedMember.lastName }}
            </p>
            <p *ngIf="selectedTrainer">
            <strong>{{ 'TRAINERS.Assign_Member.Trainer' | translate }}:</strong> 
                {{ selectedTrainer.firstName }} {{ selectedTrainer.lastName }}
            </p>
        </div>
        
        <p-divider></p-divider>
        
        <!-- Assign Trainer -->
        <div class="field" *ngIf="mode === 'assignTrainer'">
            <label for="trainerId">{{ 'TRAINERS.SELECT_TRAINER' | translate }}</label>
            <p-dropdown
                id="trainerId"
                [options]="availableTrainers"
                formControlName="trainerId"
                optionLabel="displayName"
                optionValue="id"
                [placeholder]="'TRAINERS.SELECT_TRAINER_PLACEHOLDER' | translate"
                class="w-full"
                [filter]="true"
                (onChange)="onTrainerSelect()">
                </p-dropdown>
        </div>
        
        <!-- Assign Member -->
        <div class="field" *ngIf="mode === 'addMember'">
            <label for="memberId">{{ 'TRAINERS.Assign_Member.Select_Member' | translate }}</label>
            <p-dropdown
                id="memberId"
                [options]="availableMembers"
                formControlName="memberId"
                optionLabel="displayName"
                optionValue="id"
                [placeholder]="'TRAINERS.Assign_Member.Choose' | translate"
                class="w-full"
                [filter]="true">
            </p-dropdown>
        </div>
        
        <!-- Trainer Details -->
        <div class="trainer-details" *ngIf="selectedTrainerDetails">
            <h4>{{ 'TRAINERS.TRAINER_DETAILS' | translate }}</h4>
            <p><strong>{{ 'TRAINERS.SPECIALIZATION' | translate }}:</strong> {{ selectedTrainerDetails.specialization }}</p>
            <p><strong>{{ 'TRAINERS.EXPERIENCE' | translate }}:</strong> {{ selectedTrainerDetails.yearsOfExperience }} years</p>
            <p><strong>{{ 'TRAINERS.RATING' | translate }}:</strong> {{ selectedTrainerDetails.rating }}/5</p>
            <p><strong>{{ 'TRAINERS.HOURLY_RATE' | translate }}:</strong> {{ selectedTrainerDetails.hourlyRate | currency:'EUR' }}</p>
        </div>
        
        <!-- Assignment Details -->
        <div class="assignment-details">
            <h4>{{ 'TRAINERS.Assign_Member.Details' | translate }}</h4>
            
            <div class="field">
                <label for="sessionsPerWeek">{{ 'TRAINERS.Assign_Member.Sessions_Per_Week' | translate }}:</label>
                <p-inputNumber id="sessionsPerWeek" formControlName="sessionsPerWeek" class="w-full"></p-inputNumber>
            </div>
            
            <div class="field">
                <label for="sessionRate">{{ 'TRAINERS.Assign_Member.Session_Rate' | translate }}:</label>
                <p-inputNumber id="sessionRate" formControlName="sessionRate" mode="currency" currency="EUR" class="w-full"></p-inputNumber>
            </div>
            
            <div class="field">
                <label for="startDate">{{ 'TRAINERS.Assign_Member.Start_Date' | translate }}:</label>
                <p-calendar id="startDate" formControlName="startDate" styleClass="w-full"dateFormat="dd/mm/yy"></p-calendar>
            </div>
            
            <div class="field">
                <label for="trainingGoals">{{ 'TRAINERS.Assign_Member.Training_Goals' | translate }}:</label>
                <textarea id="trainingGoals" pInputTextarea formControlName="trainingGoals" rows="3" class="w-full">
                </textarea>
            </div>

            <div class="field">
                <label for="notes">{{ 'TRAINERS.Assign_Member.Notes' | translate }}:</label>
                <textarea id="notes" pInputTextarea formControlName="notes" rows="3" class="w-full">
                </textarea>
            </div>
        </div>
    </form>
    
    <ng-template pTemplate="footer">
        <p-button 
            [label]="'COMMON.CANCEL' | translate" 
            icon="pi pi-times" 
            severity="secondary"
            (onClick)="onCancel()">
        </p-button>
        <p-button 
            [label]="'COMMON.SAVE' | translate" 
            icon="pi pi-check" 
            [loading]="loading"
            [disabled]="assignmentForm.invalid"
            (onClick)="onSubmit()">
        </p-button>
    </ng-template>
</p-dialog>