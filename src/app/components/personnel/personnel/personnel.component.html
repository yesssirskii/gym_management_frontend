<div class="page-container">
    <div class="page-header">
    <h2>{{ 'PERSONNEL.TITLE' | translate }}</h2>
    <p-button 
        icon="pi pi-plus" 
        [label]="'PERSONNEL.ADD_NEW' | translate"
        (onClick)="showCreateDialog()">
    </p-button>
    </div>

    <p-table 
        [value]="personnel" 
        [loading]="loading"
        [paginator]="true" 
        [rows]="10"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [rowsPerPageOptions]="[10,25,50]"
        dataKey="id">
    
    <ng-template pTemplate="header">
        <tr>
        <th>{{ 'PERSONNEL.Employee_Id' | translate }}</th>
        <th>{{ 'PERSONNEL.Name' | translate }}</th>
        <th>{{ 'PERSONNEL.Email' | translate }}</th>
        <th>{{ 'PERSONNEL.Role' | translate }}</th>
        <th>{{ 'PERSONNEL.Phone' | translate }}</th>
        <th>{{ 'PERSONNEL.Hire_Date' | translate }}</th>
        <th>{{ 'PERSONNEL.Status' | translate }}</th>
        <th>{{ 'PERSONNEL.Actions' | translate }}</th>
        </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-person>
        <tr>
            <td>{{ person.employeeId }}</td>
            <td>{{ person.firstName }} {{ person.lastName }}</td>
            <td>{{ person.email }}</td>
            <td>
                <p-tag [value]="person.role" severity="info"></p-tag>
            </td>
            <td>{{ person.phoneNumber }}</td>
            <td>{{ person.hireDate | date:'dd/MM/yyyy' }}</td>
            <td>
                <p-tag 
                    [value]="person.isActive ? ('COMMON.INACTIVE' | translate) : ('COMMON.ACTIVE' | translate)"
                    [severity]="person.isActive ? 'danger' : 'success'">
                </p-tag>
            </td>
            <td>
                <p-button 
                    icon="pi pi-eye" 
                    [pTooltip]="'COMMON.VIEW_DETAILS' | translate"
                    severity="info"
                    size="small"
                    (onClick)="viewPersonnel(person.id)"
                    class="mr-2">
                </p-button>
                <p-button 
                    icon="pi pi-pencil" 
                    [pTooltip]="'COMMON.EDIT' | translate"
                    severity="warning"
                    size="small"
                    (onClick)="editPersonnel(person)"   
                    class="mr-2">
                </p-button>
                <p-button 
                    icon="pi pi-trash" 
                    [pTooltip]="'COMMON.DELETE' | translate"
                    severity="danger"
                    size="small"
                    (onClick)="deletePersonnel(person)">
                </p-button>
            </td>
        </tr>
    </ng-template>
    </p-table>
</div>

<app-create-user-dialog 
    [(visible)]="createDialogVisible"
    [userType]="'Personnel'"
    (userCreated)="onUserCreated()">
</app-create-user-dialog>

<app-update-user-dialog 
  [(visible)]="editDialogVisible"
  [member]="selectedPersonnelDetails"
  [userType] = "'Personnel'"
  (memberUpdated)="onPersonnelUpdated()">
</app-update-user-dialog>